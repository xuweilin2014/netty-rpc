<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:context="http://www.springframework.org/schema/context"
       xmlns:nettyrpc="http://www.newlandframework.com/nettyrpc" xsi:schemaLocation="
	http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
	http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd
    http://www.newlandframework.com/nettyrpc http://www.newlandframework.com/nettyrpc/nettyrpc.xsd">
    <context:property-placeholder location="classpath:rpc-server.properties"/>
    
    <nettyrpc:application name="consumer-app"/>
    <nettyrpc:parameter key="heartbeat" value="60000"/>
    <nettyrpc:parameter key="heartbeatTimeout" value="30000"/>
    <nettyrpc:parameter key="capacity" value="3"/>
    <nettyrpc:parameter key="segments" value="2"/>
    
    <nettyrpc:registry id="zk1" address="127.0.0.1:2181" name="zookeeper"/>
    <nettyrpc:registry id="zk2" address="127.0.0.1:2182" name="zookeeper"/>

    <nettyrpc:reference id="addCalc" interfaceName="AddCalculate"/>
    <nettyrpc:reference id="multiCalc" interfaceName="MultiCalculate"/>
    <nettyrpc:reference id="personManage" interfaceName="PersonManage"/>
    <nettyrpc:reference id="costTime" interfaceName="CostTimeCalculate" async="true" filter="two"/>
    <nettyrpc:reference id="ability" interfaceName="AbilityDetail"/>
    <nettyrpc:reference id="cache" interfaceName="Cache"/>
    <nettyrpc:reference id="store" interfaceName="Store"/>

    <!--<nettyrpc:service id="demoPersonManage" registry="zk" interfaceName="PersonManage" ref="personManageService"
                      monitor="true" cache="true" limiter="true" token="true" filter="one,default,two,-default"/>
    <bean id="personManageService" class="PersonManageImpl"/>

    <nettyrpc:registry id="zk" name="zookeeper"  address="127.0.0.1:2181"/>
    <nettyrpc:protocol id="rpc1" name="rpc" port="10886" serialize="jdk"/>
    <nettyrpc:protocol id="rpc2" name="rpc" port="10887" serialize="jdk"/>-->
</beans>
